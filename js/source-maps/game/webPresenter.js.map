{"version":3,"sources":["game/webPresenter.js"],"names":["openNav","document","getElementById","style","width","closeNav","webPresenter","gameState","this","currentPlayer","boardSize","playerXWins","playerOWins","draws","players","characterMap","1","2","3","4","5","6","prototype","setupBoard","$","removeClass","addClass","filledCells","changeCurrentPlayer","setPlayerCharacter","player","charId","setMove","row","col","value","element","isValidMove","chkWin","html","show","animate","height","chkTie","showMove","alert","presenter","getCurrentPlayer","audio","play","css","audio2","getBoard","board","attr","printBoard","boardHtml","runGame","each","click","index","parent","state","Audio","audio3","e","proceed","confirm","data","preventDefault","hide","toggle","find","slideToggle","module","exports"],"mappings":"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","file":"game/webPresenter.js","sourcesContent":["'use strict';\n\nfunction openNav() {\n  document.getElementById(\"mySidenav\").style.width = \"75%\";\n}\nfunction closeNav() {\n  document.getElementById(\"mySidenav\").style.width = \"0\";\n}\n\nvar webPresenter = function webPresenter(gameState) {\n  this.gameState = gameState;\n  this.currentPlayer = \"X\";\n  this.boardSize = 3;\n  this.playerXWins = 0;\n  this.playerOWins = 0;\n  this.draws = 0;\n  this.players = [];\n  this.characterMap = {\n    1: '/dimSum/gfx/vectors/eggtart.png',\n    2: '/dimSum/gfx/vectors/bao.png',\n    3: '/dimSum/gfx/vectors/harGow.png',\n    4: '/dimSum/gfx/vectors/dumpling.png',\n    5: '/dimSum/gfx/vectors/shumai.png',\n    6: '/dimSum/gfx/vectors/sesame.png'\n  };\n};\n\nwebPresenter.prototype.setupBoard = function (boardSize) {\n  this.gameState.setupBoard(boardSize);\n  $('#gameBoard').removeClass();\n  $('#gameBoard').addClass('size-' + boardSize);\n  this.boardSize = boardSize;\n  this.gameState.filledCells = 0;\n  this.changeCurrentPlayer();\n  this.players[\"X\"] = [];\n  this.players[\"O\"] = [];\n  this.players[\"X\"]['charId'] = 2;\n  this.players[\"O\"]['charId'] = 1;\n};\n\nwebPresenter.prototype.setPlayerCharacter = function (player, charId) {\n  this.players[player]['charId'] = charId;\n};\n\nwebPresenter.prototype.setMove = function (row, col, value, element) {\n  if (this.gameState.isValidMove(row, col)) {\n    this.gameState.setMove(row, col, value);\n\n    if (this.gameState.chkWin(row, col, value)) {\n      if (value === \"X\") {\n        // audio3.play();\n        this.playerXWins++;\n        $('#playerXWins').html(\" \" + this.playerXWins);\n        $('#overlay').show();\n        $('#winPrompt').addClass('winX');\n        $('#winPrompt').animate({ height: '40vh' });\n      } else {\n        // audio3.play();\n        this.playerOWins++;\n        $('#playerOWins').html(\" \" + this.playerOWins);\n        $('#overlay').show();\n        $('#winPrompt').addClass('winO');\n        $('#winPrompt').animate({ height: '40vh' });\n      }\n    } else {\n      this.chkTie();\n    }\n    this.showMove(row, col, value, element);\n    this.changeCurrentPlayer();\n  } else {\n    alert(\"Not a valid move\");\n  }\n};\n\nwebPresenter.prototype.chkTie = function () {\n  if (this.gameState.chkTie()) {\n    this.draws++;\n    $('#overlay').show();\n    $('#winPrompt').addClass('draw');\n    $('#winPrompt').animate({ height: '40vh' });\n    $('#draws').html(\" \" + this.draws);\n  }\n};\n\nwebPresenter.prototype.showMove = function (row, col, value, element) {\n  if (presenter.getCurrentPlayer() === \"X\") {\n    audio.play();\n    element.addClass('playerIcon');\n    element.css('background-image', 'url(' + this.characterMap[this.players[\"X\"]['charId']] + ')');\n  } else {\n    audio2.play();\n    element.addClass('playerIcon');\n    element.css('background-image', 'url(' + this.characterMap[this.players[\"O\"]['charId']] + ')');\n  }\n};\n\nwebPresenter.prototype.getBoard = function () {\n  return this.gameState.board;\n};\n\nwebPresenter.prototype.getCurrentPlayer = function () {\n  return this.currentPlayer;\n};\n\nwebPresenter.prototype.changeCurrentPlayer = function () {\n  if (this.currentPlayer === \"X\") {\n    this.currentPlayer = \"O\";\n    $('#playerO').attr('src', '/dimSum/gfx/vectors/playerCloudSelect.png');\n    $('#playerX').attr('src', '/dimSum/gfx/vectors/player2Cloud.png');\n  } else {\n    this.currentPlayer = \"X\";\n    $('#playerX').attr('src', '/dimSum/gfx/vectors/player2CloudSelect.png');\n    $('#playerO').attr('src', '/dimSum/gfx/vectors/playerCloud.png');\n  }\n};\n\nwebPresenter.prototype.printBoard = function () {\n\n  var boardHtml = \"<table>\";\n  for (var row = 0; row < this.gameState.boardSize; row++) {\n    boardHtml += \"<tr>\";\n    for (var col = 0; col < this.gameState.boardSize; col++) {\n      boardHtml += \"<td>\" + \"</td>\";\n    }\n    boardHtml += \"</tr>\";\n  }\n  boardHtml += \"</table>\";\n\n  return boardHtml;\n};\n\nwebPresenter.prototype.runGame = function () {\n  $('#gameBoard').html(presenter.printBoard());\n  $('#gameBoard td').each(function () {\n    $(this).click(function () {\n      var col = $(this).index();\n      var row = $(this).parent().index();\n\n      presenter.setMove(row, col, presenter.getCurrentPlayer(), $(this));\n    });\n  });\n};\n\nvar state = new gameState();\nvar presenter = new webPresenter(state);\nvar audio = new Audio('/dimSum/sfx/punch.mp3');\nvar audio2 = new Audio('/dimSum/sfx/splat.wav');\nvar audio3 = new Audio('/dimSum/sfx/win.mp3');\n\n//jQuery here\n$(function () {\n  presenter.setupBoard(presenter.boardSize);\n  presenter.runGame();\n\n  $('#boardSize a').each(function () {\n    $(this).click(function (e) {\n      var proceed = confirm(\"Warning! This will reset the game, continue?\");\n      if (proceed === true) {\n        var boardSize = $(this).data('size');\n        e.preventDefault();\n        presenter.setupBoard(boardSize);\n        presenter.runGame();\n      } else {\n        return;\n      }\n    });\n  });\n  $('#boardSizes a').each(function () {\n    $(this).click(function (e) {\n      var proceed = confirm(\"Warning! This will reset the game, continue?\");\n      if (proceed === true) {\n        var boardSize = $(this).data('size');\n        e.preventDefault();\n        presenter.setupBoard(boardSize);\n        presenter.runGame();\n      } else {\n        return;\n      }\n    });\n  });\n\n  $('#restart').click(function () {\n    presenter.setupBoard(presenter.boardSize);\n    presenter.runGame();\n    $('#overlay').hide();\n    $('#winPrompt').removeClass();\n  });\n\n  $('#boards').click(function () {\n    $('#boardSizes').toggle();\n  });\n\n  $('.toggleCharBox').each(function () {\n    $(this).click(function (e) {\n      $(this).find('.charBox').slideToggle();\n    });\n  });\n\n  $('#chooseCharacter a').each(function () {\n    $(this).click(function (e) {\n      if (presenter.gameState.filledCells === 0) {\n        e.preventDefault();\n        var charId = $(this).data('charid');\n        if ($(this).parent().attr('id') === 'playerOne') {\n          presenter.setPlayerCharacter(\"O\", charId);\n        } else {\n          presenter.setPlayerCharacter(\"X\", charId);\n        }\n      } else {\n        alert(\"You must have a new game to change characters\");\n      }\n    });\n  });\n  $('#chooseCharacter2 a').each(function () {\n    $(this).click(function (e) {\n      if (presenter.gameState.filledCells === 0) {\n        e.preventDefault();\n        var charId = $(this).data('charid');\n        if ($(this).parent().attr('id') === 'playerOne') {\n          presenter.setPlayerCharacter(\"O\", charId);\n        } else {\n          presenter.setPlayerCharacter(\"X\", charId);\n        }\n      } else {\n        alert(\"You must have a new game to change characters\");\n      }\n    });\n  });\n\n  //   (function(d, s, id) {\n  //   var js, fjs = d.getElementsByTagName(s)[0];\n  //   if (d.getElementById(id)) return;\n  //   js = d.createElement(s); js.id = id;\n  //   js.src = \"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6\";\n  //   fjs.parentNode.insertBefore(js, fjs);\n  // }(document, 'script', 'facebook-jssdk'));\n});\n\nmodule.exports.webPresenter = webPresenter;"],"sourceRoot":"/source/"}