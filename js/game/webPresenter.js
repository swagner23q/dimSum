"use strict";function openNav(){document.getElementById("mySidenav").style.width="75%"}function closeNav(){document.getElementById("mySidenav").style.width="0"}var webPresenter=function(e){this.gameState=e,this.currentPlayer="X",this.boardSize=3,this.playerXWins=0,this.playerOWins=0,this.draws=0,this.players=[],this.characterMap={1:"/dimSum/gfx/vectors/eggtart.png",2:"/dimSum/gfx/vectors/bao.png",3:"/dimSum/gfx/vectors/harGow.png",4:"/dimSum/gfx/vectors/dumpling.png",5:"/dimSum/gfx/vectors/shumai.png",6:"/dimSum/gfx/vectors/sesame.png"}};webPresenter.prototype.setupBoard=function(e){this.gameState.setupBoard(e),$("#gameBoard").removeClass(),$("#gameBoard").addClass("size-"+e),this.boardSize=e,this.gameState.filledCells=0,this.changeCurrentPlayer(),this.players.X=[],this.players.O=[],this.players.X.charId=2,this.players.O.charId=1},webPresenter.prototype.setPlayerCharacter=function(e,t){this.players[e].charId=t},webPresenter.prototype.setMove=function(e,t,r,a){this.gameState.isValidMove(e,t)?(this.gameState.setMove(e,t,r),this.gameState.chkWin(e,t,r)?"X"===r?(this.playerXWins++,$("#playerXWins").html(" "+this.playerXWins),$("#overlay").show(),$("#winPrompt").addClass("winX"),$("#winPrompt").animate({height:"40vh"})):(this.playerOWins++,$("#playerOWins").html(" "+this.playerOWins),$("#overlay").show(),$("#winPrompt").addClass("winO"),$("#winPrompt").animate({height:"40vh"})):this.chkTie(),this.showMove(e,t,r,a),this.changeCurrentPlayer()):alert("Not a valid move")},webPresenter.prototype.chkTie=function(){this.gameState.chkTie()&&(this.draws++,$("#overlay").show(),$("#winPrompt").addClass("draw"),$("#winPrompt").animate({height:"40vh"}),$("#draws").html(" "+this.draws))},webPresenter.prototype.showMove=function(e,t,r,a){"X"===presenter.getCurrentPlayer()?(audio.play(),a.addClass("playerIcon"),a.css("background-image","url("+this.characterMap[this.players.X.charId]+")")):(audio2.play(),a.addClass("playerIcon"),a.css("background-image","url("+this.characterMap[this.players.O.charId]+")"))},webPresenter.prototype.getBoard=function(){return this.gameState.board},webPresenter.prototype.getCurrentPlayer=function(){return this.currentPlayer},webPresenter.prototype.changeCurrentPlayer=function(){"X"===this.currentPlayer?(this.currentPlayer="O",$("#playerO").attr("src","/dimSum/gfx/vectors/playerCloudSelect.png"),$("#playerX").attr("src","/dimSum/gfx/vectors/player2Cloud.png")):(this.currentPlayer="X",$("#playerX").attr("src","/dimSum/gfx/vectors/player2CloudSelect.png"),$("#playerO").attr("src","/dimSum/gfx/vectors/playerCloud.png"))},webPresenter.prototype.printBoard=function(){for(var e="<table>",t=0;t<this.gameState.boardSize;t++){e+="<tr>";for(var r=0;r<this.gameState.boardSize;r++)e+="<td></td>";e+="</tr>"}return e+="</table>"},webPresenter.prototype.runGame=function(){$("#gameBoard").html(presenter.printBoard()),$("#gameBoard td").each(function(){$(this).click(function(){var e=$(this).index(),t=$(this).parent().index();presenter.setMove(t,e,presenter.getCurrentPlayer(),$(this))})})};var state=new gameState,presenter=new webPresenter(state),audio=new Audio("/dimSum/sfx/punch.mp3"),audio2=new Audio("/dimSum/sfx/splat.wav"),audio3=new Audio("/dimSum/sfx/win.mp3");$(function(){presenter.setupBoard(presenter.boardSize),presenter.runGame(),$("#boardSize a").each(function(){$(this).click(function(e){var t=confirm("Warning! This will reset the game, continue?");if(t===!0){var r=$(this).data("size");e.preventDefault(),presenter.setupBoard(r),presenter.runGame()}})}),$("#boardSizes a").each(function(){$(this).click(function(e){var t=confirm("Warning! This will reset the game, continue?");if(t===!0){var r=$(this).data("size");e.preventDefault(),presenter.setupBoard(r),presenter.runGame()}})}),$("#restart").click(function(){presenter.setupBoard(presenter.boardSize),presenter.runGame(),$("#overlay").hide(),$("#winPrompt").removeClass()}),$("#boards").click(function(){$("#boardSizes").toggle()}),$(".toggleCharBox").each(function(){$(this).click(function(e){$(this).find(".charBox").slideToggle()})}),$("#chooseCharacter a").each(function(){$(this).click(function(e){if(0===presenter.gameState.filledCells){e.preventDefault();var t=$(this).data("charid");"playerOne"===$(this).parent().attr("id")?presenter.setPlayerCharacter("O",t):presenter.setPlayerCharacter("X",t)}else alert("You must have a new game to change characters")})}),$("#chooseCharacter2 a").each(function(){$(this).click(function(e){if(0===presenter.gameState.filledCells){e.preventDefault();var t=$(this).data("charid");"playerOne"===$(this).parent().attr("id")?presenter.setPlayerCharacter("O",t):presenter.setPlayerCharacter("X",t)}else alert("You must have a new game to change characters")})})}),module.exports.webPresenter=webPresenter;
//# sourceMappingURL=../source-maps/game/webPresenter.js.map
